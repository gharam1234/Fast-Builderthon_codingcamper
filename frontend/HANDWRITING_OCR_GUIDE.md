# 손글씨 OCR (Optical Character Recognition) 기능

## 개요

Yeoul 플랫폼의 손글씨 OCR 기능은 사용자가 촬영한 필기 노트를 자동으로 인식하고 텍스트로 변환합니다. AI 기반 문자 인식으로 한국어와 영어를 모두 지원합니다.

## 주요 기능

### 1. 손글씨 인식 및 분석
- **📸 사진 업로드**: 파일 선택 또는 카메라로 직접 촬영
- **🤖 AI 분석**: Tesseract.js 기반 OCR 처리
- **✅ 신뢰도 표시**: 인식 정확도를 백분율로 표시
- **✏️ 수정 가능**: 인식된 텍스트를 수정하여 정확도 개선

### 2. 파일 관리
- **💾 자동 저장**: 인식된 텍스트는 자동으로 히스토리에 저장
- **📥 다운로드**: TXT 파일로 다운로드 가능
- **📋 복사**: 텍스트를 클립보드에 복사
- **🗑️ 삭제**: 불필요한 항목 삭제

### 3. 히스토리 관리
- **📊 기록 조회**: 촬영한 모든 필기 인식 기록 확인
- **🔍 상세 보기**: 원본 이미지와 인식된 텍스트 함께 표시
- **🧹 전체 삭제**: 한번에 모든 기록 삭제 가능

## 사용 방법

### 손글씨 OCR 시작하기

1. **강좌 입장**
   - 강의 목록에서 강좌 선택
   - 강의 대시보드 진입

2. **OCR 버튼 클릭**
   - "Scan Handwriting Note" 버튼 클릭
   - 손글씨 OCR 모달 열기

3. **사진 선택**
   - 파일 업로드 또는 카메라 촬영
   - 밝은 환경에서 명확한 필기 추천

4. **OCR 처리**
   - AI가 자동으로 텍스트 인식
   - 처리 진행률 확인

5. **결과 확인 및 제출**
   - 인식된 텍스트 확인
   - 필요시 수정
   - "제출" 버튼으로 완료

### 히스토리 조회하기

1. **마이페이지 열기**
   - 프로필 아이콘 클릭

2. **OCR 히스토리 버튼**
   - "OCR 히스토리" 버튼 클릭
   - 모든 인식 기록 확인

3. **기록 관리**
   - 각 항목 펼쳐서 상세 보기
   - 복사, 다운로드, 삭제 기능 사용

## 기술 스택

### 사용 라이브러리
- **Tesseract.js**: 클라이언트 사이드 OCR 엔진
- **React**: UI 컴포넌트 라이브러리
- **Framer Motion**: 애니메이션 효과
- **LocalStorage**: 히스토리 저장

### 지원 언어
- 🇰🇷 한국어
- 🇬🇧 영어 (현재는 영어만 지원, 추후 한글 모델 추가 예정)

## 컴포넌트 구조

```
components/
├── HandwritingOCR.tsx          # 메인 OCR 모달
├── OCRResultsDisplay.tsx       # 결과 표시 컴포넌트
├── OCRHistoryPage.tsx          # 히스토리 페이지
└── CourseDashboard.tsx         # OCR 버튼 통합

hooks/
└── useOCRHistory.ts            # 히스토리 관리 Hook
```

## 주요 파일 설명

### HandwritingOCR.tsx
- 3단계 UI: 업로드 → 처리 → 결과
- 파일 및 카메라 입력 지원
- 실시간 진행률 표시
- 결과 수정 가능

### OCRHistoryPage.tsx
- 모든 OCR 기록 표시
- 날짜별 정렬 (최신순)
- 아코디언 스타일 상세 보기
- 대량 작업 지원 (삭제, 다운로드)

### useOCRHistory.ts
- LocalStorage 기반 데이터 관리
- CRUD 작업 지원
- 타입 안정성 (TypeScript)

## 신뢰도 등급

| 신뢰도 | 색상 | 설명 |
|--------|------|------|
| 80%+ | 🟢 초록색 | 매우 높은 신뢰도 |
| 60~79% | 🟡 노란색 | 보통 신뢰도 |
| ~59% | 🟠 주황색 | 낮은 신뢰도 |

## 성능 팁

### 좋은 인식을 위한 팁
1. **밝은 환경**: 자연광이나 밝은 실내 조명 사용
2. **명확한 필기**: 크고 또렷한 글씨
3. **올바른 각도**: 사진을 수직으로 촬영
4. **깨끗한 노트**: 여백 있는 깔끔한 노트
5. **좋은 컨트래스트**: 검은색 펜과 흰 종이

### 낮은 신뢰도 시
- 사진을 다시 촬영해보기
- 조명 개선하기
- 손글씨 선명도 확인하기
- 인식된 텍스트 직접 수정하기

## 데이터 저장

OCR 히스토리는 **브라우저의 LocalStorage**에 저장됩니다.
- 자동 저장: 사용자 조작 불필요
- 브라우저 캐시 삭제 시 데이터 손실
- 최대 저장 크기: 브라우저마다 다름 (보통 5-10MB)

## 향후 계획

### 개선 예정
- [ ] 한글 OCR 모델 업데이트
- [ ] 오프라인 지원 (Service Worker)
- [ ] 클라우드 동기화
- [ ] 고급 이미지 전처리
- [ ] OCR 결과 자동 제출

### 기대 기능
- [ ] 수식 인식 (LaTeX 변환)
- [ ] 표 인식
- [ ] 다중 페이지 문서 인식
- [ ] AI 자동 요약 기능

## 문제 해결

### Q: OCR이 작동하지 않습니다
**A**: 
- 최신 브라우저 사용 확인 (Chrome, Safari, Edge)
- 브라우저 캐시 삭제
- 개발자 도구의 콘솔에서 에러 메시지 확인

### Q: 신뢰도가 너무 낮습니다
**A**:
- 사진의 밝기와 선명도 개선
- 필기체가 명확한지 확인
- 손글씨를 다시 촬영해보기
- 인식된 텍스트를 직접 수정하기

### Q: 히스토리가 저장되지 않습니다
**A**:
- 브라우저 LocalStorage 설정 확인
- 시크릿/프라이빗 모드 비활성화
- 저장 공간 확인

## 관련 코드

```tsx
// HandwritingOCR 모달 열기
<motion.button
  onClick={() => setShowOCR(true)}
  className="...glowing-button..."
>
  📸 손글씨 OCR 분석
</motion.button>

// HandwritingOCR 모달 사용
{showOCR && (
  <HandwritingOCR
    onClose={() => setShowOCR(false)}
    onSubmit={(text) => {
      console.log('OCR Result:', text)
    }}
  />
)}
```

## 라이선스 및 속성

- **Tesseract.js**: Apache 2.0 License
- **UI 디자인**: Yeoul 플랫폼 기준
- **이미지 처리**: 브라우저 네이티브 API

---

**마지막 업데이트**: 2026년 1월 31일
